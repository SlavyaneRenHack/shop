<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="shop.css"/>
    <!-- <script src="shop.js"></script> -->
    <script>
    async function callPayEndpoint() {
    	try {
        	const response = await fetch('/pay'); // Wait for the fetch to complete
        	const data = await response.text(); // Parse the JSON from the response
        	console.log('Token:', data);
        	const token = document.getElementById('token');
        	token.innerText = data
      	} catch (error) {
        	console.error('Error:', error);
      	}
    }

    document.addEventListener('DOMContentLoaded', (event) => {
      const button = document.getElementById('pay_button');
      button.addEventListener('click', callPayEndpoint);
    });
  </script>
  </head>
  <body>
    <header>
      <nav>
        <ul class="list">
          <li class="item"><a href="" class="link">Главная</a></li>
          <li class="item"><a href="" class="link">Отзывы</a></li>
          <li class="item"><a href="" class="link">Документы</a></li>
        </ul>
      </nav>
      <a href=""><span class="icon"></span></a>
    </header>
    <main>
      <div class="main__content">
        <h2 class="header">Оплата</h2>
        <ul class="main__list">
          <li class="main__item">Название товара: Блок питания Блок питания 200W/5V/40A</li>
          <li class="main__item">Количество: 1</li>
          <li class="main__item">Сумма: 1500</li>
        </ul>
        <p class="main__Payment">Способ оплаты: Токен</p>
        <div class="div">
          <div class="main__div"><span id="token"></span></div>
          <div class="div__icon"></div>
        </div>
        <button id="pay_button" class="main__link">Cгенерировать</button>
        <p class="main__description">
          Все права и конфиденциальные данные защищены
        </p>
      </div>
    </main>
  </body>
</html>
